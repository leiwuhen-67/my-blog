(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{432:function(s,n,t){"use strict";t.r(n);var a=t(4),e=Object(a.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("最近，突然想着把 node 升级一下，之前用的 v16.20.2 的，升级到了 v20.12.2，升级完后，打包项目，发现完犊子了，直接报错，报错信息类似这种"),n("br"),s._v("\n Error: error:0308010C:digital envelope routines::unsupported"),n("br"),s._v("at new Hash (node:internal/crypto/hash:80:19)"),n("br"),s._v("at Object.createHash (node:crypto:139:10)"),n("br"),s._v("\n 死活打包不成功。然后把 node 切回之前的版本，再次打包，发现是可以的，这下可以确定是 node 版本不兼容导致的问题，原因是 node v17 版本之后发布的 OpenSSL3.0 这个鬼东西导致的，OpenSSL3.0 对允许算法和密钥大小增加了严格的限制，因此才有这个问题。"),n("br"),s._v("\n那么怎么解决这个问题呢？")]),s._v(" "),n("p",[s._v("这里有两种办法解决"),n("br"),s._v("\n 1、切换回之前能正常运行的 node 版本")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用nvm这个node版本管理工具，在需要打包老项目时，切换回老版本的node")]),s._v("\nnvm ls  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查看当前已安装的版本")]),s._v("\n\nnvm use 版本号 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 切换到指定的node版本，仅针对当前当次命令窗口生效")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("2、告诉 node 使用旧版 OpenSSL 来运行程序")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Linux、macOS、Git bash等命令终端运行")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_OPTIONS")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("openssl"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("legacy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("provider\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Windows 命令窗口下")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_OPTIONS")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("openssl"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("legacy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("provider\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在 PowerShell 上")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("$env")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_OPTIONS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--openssl-legacy-provider"')]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 然后执行npm run build即可")]),s._v("\nnpm run build\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("3、如果项目是个人开发，仅自己使用的话，也可以在 package.json 中重新配置脚本")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 记住，区分自己的开发环境是mac还是windows")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"dev"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"export NODE_OPTIONS=--openssl-legacy-provider && vuepress dev docs --debug"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"build"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"export NODE_OPTIONS=--openssl-legacy-provider && vuepress build docs"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);