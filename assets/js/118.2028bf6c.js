(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{458:function(n,s,a){"use strict";a.r(s);var t=a(4),e=Object(t.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("p",[n._v("之前总想着自己尝试一下开发完项目，打包后自己部署一下，奈何不是没时间就是进行到一半就放弃了，最近刚好有空就尝试下，差点又放弃了，虽然历尽波折，总算最后还是解决了。")]),n._v(" "),s("p",[n._v("这里以 vite+react+ts 项目为准，react 是使用 history 模式开发的，项目打包时开启了 gzip 压缩并删除了源文件")]),n._v(" "),s("p",[n._v("这里以 Mac 环境为例，未安装 nginx 的需要先安装 nginx，可以使用 brew 安装")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("brew install nginx\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br")])]),s("p",[n._v("安装好后，就可以开始部署了"),s("br"),n._v("\n更改 nginx.conf 配置文件，也可重新创建配置文件（在 nginx/servers 中，创建 xxx.conf 配置文件），然后在 nginx.conf 配置文件的 http 下使用 include 引入一下即可")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('server {\n\tlisten       8080;\n    server_name  localhost;  #替换为你的域名或 IP 地址\n    location / {\n        root  /path/to/your/react/build;  #打包后存放项目的路径\n        index  index.html index.htm;\n        try_files $uri /index.html;   #使用history模式的，必须配置，否则刷新页面会报404\n    }\n\n    gzip  on;   #开启gzip功能\n    gzip_vary on;  # 是否在http header中添加Vary: Accept-Encoding，**一定要开启,不开启读取不到.gz结尾的压缩文件**\n    gzip_static on;  #开启gzip静态压缩功能\n\n    # 其他静态资源，必须配置，否则会读取静态资源失败，MIME类型错误等信息\n    location ~* \\.(js|css|html|png|jpg|jpeg|gif|ico|svg)(\\.gz)?$ {\n        root /path/to/your/react/build;\n        expires 30d;\n        add_header Cache-Control "public, must-revalidate";\n    }\n  }\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br")])]),s("p",[n._v("至此，配置完毕，项目可以正常运行了，刷新也是正常的。")])])}),[],!1,null,null,null);s.default=e.exports}}]);